version: 1
plugins:
  - source: file
    path: ../../../plugins/rule-loom-core
  - source: file
    path: ../../../plugins/rule-loom-plugin-http
inputs:
  - type: http
    config: {}
    triggers:
      - type: httpRoute
        method: post
        path: /flow-params
        flow: invoke-flow-closure
closures:
  - type: flow
    name: echo-message
    steps:
      - closure: core.respond
        parameters:
          status: 200
          body:
            echoed: "${parameters.message}"
flows:
  - name: invoke-flow-closure
    steps:
      - closure: echo-message
        parameters:
          message: "${request.body.message}"
