version: 1
inputs:
  - type: http
    routes:
      - method: post
        path: /state-runtime-demo
        flow: demo-state-runtime
closures:
  - type: bundle
    preset: core
flows:
  - name: demo-state-runtime
    steps:
      - closure: core.assign
        parameters:
          target: order
          value: "${request.body}"
      - closure: core.log
        parameters:
          level: info
          message: "processing ${state.order.userId} (req ${runtime.requestId})"
      - closure: core.respond
        parameters:
          status: 200
          body:
            ok: true
            order: "${state.order}"
            requestId: "${runtime.requestId}"
